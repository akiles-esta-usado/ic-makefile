source $env(PDK_ROOT)/gf180mcuD/libs.tech/xschem/xschemrc

set script_path [ file dirname [ file normalize [ info script ] ] ]

# Please fix this mess eventually

append XSCHEM_LIBRARY_PATH :$script_path/inv_sample

foreach module [ glob -nocomplain -type d * ] {
    puts module

    set xschem_files {}

    append xschem_files [ glob -nocomplain $script_path/$module/symbol/*.sch ]
    append xschem_files [ glob -nocomplain $script_path/$module/symbol/*.sym ]

    if { [ llength $xschem_files ] > 0 } {
        append XSCHEM_LIBRARY_PATH :$script_path/$module
    }
}

set XSCHEM_START_WINDOW {0_top.sch}


proc create_empty_sch { filename } {
    puts "Creating $filename"
    xschem clear force
    xschem saveas $filename schematic
    exit
}

proc get_variables { } {
    puts "current_dirname:  [ xschem get current_dirname ]" 
    puts "current_name:     [ xschem get current_name ]" 
    puts "current_win_path: [ xschem get current_win_path ]" 
    puts "netlist_name:     [ xschem get netlist_name ]" 
    puts "netlist_type:     [ xschem get netlist_type ]" 
    puts "version:          [ xschem get version ]" 
}